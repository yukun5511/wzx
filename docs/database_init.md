# 云开发数据库初始化

请在微信开发者工具 -> 云开发 -> 数据库中创建以下集合：

- `users`：用户与角色
- `teacher_applications`：学生申请成为老师的审批单
- `audit_logs`：关键管理操作审计日志
- `trips`：学生行程收集
- `materials`：文档资料存档
- `credits`：学生积分/学分
- `assignments`：作业题目
- `submissions`：作业提交与批改
- `attendance`：签到与考勤记录
- `course_content`：课程展示内容

## 建议权限规则（数据库权限）

- 开发阶段可先使用“仅创建者可读写 + 云函数读写”。
- 生产阶段建议：
  - 客户端直接访问关闭（仅云函数可写），由云函数统一鉴权。

## 角色与审批初始化

1. 首次登录先在“我的”页授权手机号。
2. 云函数会将手机号与 `miniprogram/app.js` 里 `adminProfiles` 的手机号列表对比。
3. 命中手机号（当前写死 `17611681866`）会自动设为 `admin`。
4. 普通用户默认为 `student`，可在“我的”页提交老师申请。
5. 管理员在“我的”页审批申请，通过后用户角色变为 `teacher`。
